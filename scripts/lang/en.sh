#!/bin/bash
# English Language Strings for Node Pulse Admiral Deployment Script

# Color codes (same across all languages)
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

# Header
MSG_TITLE="Node Pulse Admiral - Interactive Deployment"

# Prerequisites
MSG_CHECKING_PREREQUISITES="Checking prerequisites..."
MSG_ERROR_NOT_ROOT="Error: This script must be run as root or with sudo"
MSG_USAGE="Usage: sudo"
MSG_ERROR_DOCKER_NOT_INSTALLED="Error: Docker is not installed"
MSG_INSTALL_DOCKER="Please install Docker first: https://docs.docker.com/engine/install/"
MSG_ERROR_COMPOSE_NOT_INSTALLED="Error: Docker Compose is not installed"
MSG_INSTALL_COMPOSE="Please install Docker Compose: https://docs.docker.com/compose/install/"
MSG_PREREQUISITES_PASSED="âœ“ Prerequisites check passed"

# Validation
MSG_ERROR_COMPOSE_NOT_FOUND="Error: Cannot find compose.yml in:"
MSG_HELP_CD="Please cd to the project root directory before running this script:"
MSG_VALIDATING_FILES="Validating deployment files"
MSG_COMPOSE_FOUND="âœ“ compose.yml found"
MSG_COMPOSE_NOT_FOUND="Error: compose.yml not found"
MSG_CADDYFILE_FOUND="âœ“ caddy/Caddyfile.prod found"
MSG_ERROR_CADDYFILE_NOT_FOUND="Error: caddy/Caddyfile.prod not found"
MSG_CADDYFILE_NOT_FOUND="Error: caddy/Caddyfile.prod not found"
MSG_CADDYFILE_REQUIRED="This is a production deployment script and requires Caddyfile.prod"
MSG_PRODUCTION_SCRIPT="This is a production deployment script and requires Caddyfile.prod"
MSG_CURRENT_DIR="Current directory:"
MSG_LOOKING_FOR="Looking for:"

# Existing .env
MSG_FOUND_EXISTING_ENV="Found existing .env file"
MSG_USE_EXISTING_ENV="Do you want to use existing .env configuration? (Y/n):"
MSG_LOADING_DEFAULTS="Loading current values as defaults..."
MSG_LOADED_CONFIG="âœ“ Loaded existing configuration"
MSG_BACKED_UP_ENV="âœ“ Backed up existing .env to"
MSG_STARTING_FRESH="Starting fresh configuration..."

# Environment Configuration
MSG_ENV_CONFIG="Environment Configuration"

# PostgreSQL
MSG_POSTGRES_SECTION="PostgreSQL Configuration"
MSG_POSTGRES_USER="PostgreSQL database user"
MSG_POSTGRES_PASSWORD="PostgreSQL password (auto-generated)"
MSG_POSTGRES_DB="PostgreSQL database name"

# Valkey/Redis
MSG_VALKEY_SECTION="Valkey/Redis Configuration"
MSG_VALKEY_HOST_SET="VALKEY_HOST set to 'valkey' (Docker service name)"
MSG_VALKEY_PORT_SET="VALKEY_PORT set to '6379' (default Redis port)"
MSG_VALKEY_PASSWORD="Valkey password (auto-generated)"

# Submarines
MSG_SUBMARINES_SECTION="Submarines Configuration (Go-Gin Backend)"
MSG_DB_HOST_SET="DB_HOST set to 'postgres' (Docker service name)"
MSG_DB_PORT_SET="DB_PORT set to '5432' (default PostgreSQL port)"
MSG_DB_SSLMODE_SET="DB_SSLMODE set to 'disable' (internal Docker network)"
MSG_DB_AUTO_SET="DB_USER, DB_PASSWORD, DB_NAME auto-set from PostgreSQL config"
MSG_PORTS_HARDCODED="Ports hardcoded in service binaries:"
MSG_PORT_INGEST="  - Ingest:   8080"
MSG_PORT_STATUS="  - Status:   8081"
MSG_PORT_SSHWS="  - SSH WS:   6001"
MSG_PORT_FLAGSHIP="  - Flagship: 8090 (Nginx)"
MSG_GIN_MODE_SET="GIN_MODE set to 'release' (production mode)"
MSG_JWT_SECRET="JWT secret key (auto-generated)"
MSG_CERT_VALIDITY_SET="CERT_VALIDITY_DAYS set to '180' (6 months, production default)"

# Flagship
MSG_FLAGSHIP_SECTION="Flagship Configuration (Laravel Dashboard)"
MSG_APP_NAME="Application name"
MSG_APP_DEBUG="Enable debug mode (true/false)"
MSG_APP_KEY="Laravel encryption key (auto-generated)"
MSG_APP_DOMAIN="Dashboard Application domain (without https://)"
MSG_APP_LOCALE_SET="APP_LOCALE, APP_FALLBACK_LOCALE set to 'en' (English)"
MSG_APP_MAINTENANCE_SET="APP_MAINTENANCE_DRIVER set to 'file' (standard Laravel driver)"
MSG_LOG_LEVEL="Log level (debug/info/warning/error)"
MSG_LOG_CHANNEL_SET="LOG_CHANNEL set to 'stack', LOG_STACK set to 'single'"
MSG_DB_CONNECTION_SET="DB_CONNECTION set to pgsql (PostgreSQL only)"
MSG_DB_DATABASE_AUTO_SET="DB_DATABASE and DB_USERNAME auto-set from PostgreSQL config"
MSG_SESSION_CONFIG="Sessions, Cache, Queue configured to use Redis (Valkey)"
MSG_SESSION_SECURE_SET="SESSION_SECURE_COOKIE set to 'true' (requires HTTPS in production)"
MSG_REDIS_AUTO_SET="REDIS_HOST, REDIS_PORT, REDIS_PASSWORD auto-set from Valkey config"

# Master Key
MSG_MASTER_KEY_SECTION="Master Key for SSH Private Key Encryption"
MSG_MASTER_KEY_EXISTS="âœ“ Master key file already exists"
MSG_MASTER_KEY_LOCATION="  Location:"
MSG_KEEP_MASTER_KEY="Keep existing master key? (Y/n):"
MSG_USING_EXISTING_KEY="âœ“ Using existing master key"
MSG_BACKED_UP_KEY="âœ“ Backed up existing key to"
MSG_NEW_KEY_GENERATED="âœ“ New master key generated"
MSG_REENCRYPT_WARNING="âš ï¸  All existing SSH keys will need to be re-imported!"
MSG_GENERATING_KEY="Generating new master key for SSH private key encryption..."
MSG_KEY_GENERATED="âœ“ Master key generated successfully"
MSG_KEY_FORMAT="  Format: 64-character hex (32 bytes for AES-256-CBC)"
MSG_KEY_PERMISSIONS="  Permissions: 600 (owner read/write only)"
MSG_BACKUP_KEY_HEADER="â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
MSG_BACKUP_KEY_WARNING="âš ï¸  IMPORTANT: BACKUP THIS KEY AFTER DEPLOYMENT!"
MSG_KEY_ENCRYPTS="This key encrypts all SSH private keys."
MSG_KEY_LOST="If lost, you will NOT be able to decrypt them!"
MSG_KEY_BACKUP_INFO="The deployment will show you the key location at the end."
MSG_KEY_BACKUP_LOCATIONS="Recommended backup locations:"
MSG_KEY_BACKUP_PASSWORD_MANAGER="  â€¢ Password manager (1Password, Bitwarden, etc.)"
MSG_KEY_BACKUP_USB="  â€¢ Encrypted USB drive"
MSG_KEY_BACKUP_CLOUD="  â€¢ Secure cloud storage (encrypted)"
MSG_PRESS_ENTER="Press Enter to continue (you can backup the key after deployment completes)..."

# Master Key Verification
MSG_VERIFYING_KEY="Verifying Master Key"
MSG_KEY_NOT_FOUND="âœ— Master key file not found!"
MSG_KEY_EXPECTED="  Expected location:"
MSG_KEY_SHOULD_EXIST="The master key should have been created during configuration."
MSG_CREATING_KEY_NOW="Creating it now..."
MSG_KEY_EXISTS_VERIFIED="âœ“ Master key file exists"
MSG_FIXING_PERMISSIONS="âš   Fixing file permissions (should be 600 for owner-only access)"
MSG_CURRENT_PERMS="   Current:"
MSG_EXPECTED_PERMS="Expected:"
MSG_PERMISSIONS_CORRECTED="âœ“ Permissions corrected"
MSG_KEY_FILE_EMPTY="âœ— Master key file is empty!"
MSG_KEY_REGENERATE="Please regenerate the master key or restore from backup."

# Ansible Directory
MSG_ENSURING_ANSIBLE="Ensuring ansible directory structure..."
MSG_CATALOG_CREATED="âœ“ Created ansible/catalog directory"
MSG_CATALOG_EXISTS="âœ“ ansible/catalog directory already exists"

# Mail Configuration
MSG_MAIL_SECTION="Mail Configuration (Optional)"
MSG_MAIL_CONFIGURE="Configure email delivery?"
MSG_MAIL_OPTION_LOG="  1) Log only (no emails sent, for testing)"
MSG_MAIL_OPTION_SMTP="  2) SMTP (configure mail server)"
MSG_MAIL_SELECT="Select option [1-2] (default: 1):"
MSG_MAIL_HOST="SMTP host"
MSG_MAIL_PORT="SMTP port (587 for TLS, 465 for SSL)"
MSG_MAIL_USERNAME="SMTP username"
MSG_MAIL_PASSWORD="SMTP password"
MSG_MAIL_ENCRYPTION="Encryption (tls/ssl/null)"
MSG_MAIL_FROM="From email address"
MSG_SMTP_CONFIGURED="âœ“ SMTP mail configured"
MSG_MAIL_LOG_SET="âœ“ Mail set to 'log' driver (emails logged, not sent)"

# CAPTCHA Configuration
MSG_CAPTCHA_SECTION="CAPTCHA Anti-Bot Protection (Optional)"
MSG_CAPTCHA_CHOOSE="Choose CAPTCHA provider:"
MSG_CAPTCHA_TURNSTILE="  1) Cloudflare Turnstile (recommended - privacy-friendly)"
MSG_CAPTCHA_RECAPTCHA_V2="  2) Google reCAPTCHA v2 (checkbox)"
MSG_CAPTCHA_RECAPTCHA_V3="  3) Google reCAPTCHA v3 (invisible)"
MSG_CAPTCHA_NONE="  4) None (skip CAPTCHA configuration)"
MSG_CAPTCHA_SELECT="Select option [1-4] (recommend: 1; default: 4):"
MSG_CAPTCHA_TURNSTILE_URL="Get your Turnstile keys at: https://dash.cloudflare.com/"
MSG_CAPTCHA_TURNSTILE_SITE_KEY="Turnstile Site Key"
MSG_CAPTCHA_TURNSTILE_SECRET="Turnstile Secret Key"
MSG_CAPTCHA_RECAPTCHA_V2_URL="Get your reCAPTCHA v2 keys at: https://www.google.com/recaptcha/admin"
MSG_CAPTCHA_RECAPTCHA_V2_SITE_KEY="reCAPTCHA v2 Site Key"
MSG_CAPTCHA_RECAPTCHA_V2_SECRET="reCAPTCHA v2 Secret Key"
MSG_CAPTCHA_RECAPTCHA_V3_URL="Get your reCAPTCHA v3 keys at: https://www.google.com/recaptcha/admin"
MSG_CAPTCHA_RECAPTCHA_V3_SITE_KEY="reCAPTCHA v3 Site Key"
MSG_CAPTCHA_RECAPTCHA_V3_SECRET="reCAPTCHA v3 Secret Key"
MSG_CAPTCHA_RECAPTCHA_V3_THRESHOLD="Score threshold (0.0=bot to 1.0=human)"
MSG_CAPTCHA_SKIPPED="Skipping CAPTCHA configuration (can be enabled later)"
MSG_CAPTCHA_ENABLE_PAGES="Enable CAPTCHA for which pages?"
MSG_CAPTCHA_LOGIN="Enable for Login page? (Y/n):"
MSG_CAPTCHA_REGISTER="Enable for Registration page? (Y/n):"
MSG_CAPTCHA_FORGOT="Enable for Forgot Password page? (Y/n):"
MSG_CAPTCHA_RESET="Enable for Reset Password page? (y/N):"

# Production Domain
MSG_DOMAIN_SECTION="Production Domain Configuration (Optional)"
MSG_FLAGSHIP_DOMAIN="Dashboard application domain (aka Flagship)"

# Admin User
MSG_ADMIN_SECTION="Dashboard Admin User Registration"
MSG_ADMIN_INFO="Create the initial admin user for the dashboard."
MSG_ADMIN_USAGE="You will use these credentials to log in after deployment."
MSG_ADMIN_NAME="Admin user full name"
MSG_ADMIN_EMAIL="Admin user email (used for login)"
MSG_ADMIN_PASSWORD="Admin user password (min 8 characters)"
MSG_PASSWORD_TOO_SHORT="Password must be at least 8 characters"

# Configuration Review
MSG_REVIEW="Configuration Review"
MSG_REVIEW_POSTGRES="PostgreSQL:"
MSG_REVIEW_USER="  User:"
MSG_REVIEW_PASSWORD="  Password:"
MSG_REVIEW_DATABASE="  Database:"
MSG_REVIEW_VALKEY="Valkey/Redis:"
MSG_REVIEW_SUBMARINES="Submarines (Go-Gin):"
MSG_REVIEW_JWT="  JWT Secret:"
MSG_REVIEW_PORTS="  Ports: 8080 ingest, 8081 status (hardcoded in binaries)"
MSG_REVIEW_FLAGSHIP="Flagship (Laravel):"
MSG_REVIEW_APP_NAME="  App Name:"
MSG_REVIEW_APP_ENV="  App Env:"
MSG_REVIEW_APP_ENV_NOTE="(hardcoded, production-only)"
MSG_REVIEW_APP_DEBUG="  App Debug:"
MSG_REVIEW_APP_DOMAIN="  App Domain:"
MSG_REVIEW_APP_URL="  App URL:"
MSG_REVIEW_APP_KEY="  App Key:"
MSG_REVIEW_CAPTCHA="CAPTCHA Protection:"
MSG_REVIEW_CAPTCHA_PROVIDER="  Provider:"
MSG_REVIEW_CAPTCHA_FEATURES="  Enabled Features:"
MSG_REVIEW_CAPTCHA_DISABLED="  Status:            Disabled"
MSG_REVIEW_DOMAIN="Production Domain (Caddy):"
MSG_REVIEW_FLAGSHIP_DOMAIN="  Flagship:"
MSG_REVIEW_MAIL="Mail Configuration:"
MSG_REVIEW_MAIL_DRIVER="  Driver:"
MSG_REVIEW_MAIL_SMTP="SMTP"
MSG_REVIEW_MAIL_HOST="  Host:"
MSG_REVIEW_MAIL_FROM="  From:"
MSG_REVIEW_MAIL_LOG="Log (emails not sent, for testing)"
MSG_REVIEW_ADMIN="Admin User:"
MSG_REVIEW_ADMIN_NAME="  Name:"
MSG_REVIEW_ADMIN_EMAIL="  Email:"
MSG_REVIEW_ADMIN_PASSWORD="  Password: ********** (hidden)"
MSG_REVIEW_CONFIRM="Is this configuration correct? (yes/no/restart):"
MSG_CONFIG_CONFIRMED="âœ“ Configuration confirmed"
MSG_CONFIG_ABORTED="Configuration aborted by user"
MSG_CONFIG_EXITING="Exiting without making changes..."
MSG_CONFIG_RESTARTING="Restarting configuration..."
MSG_CONFIG_INVALID="Invalid option. Please enter 'yes', 'no', or 'restart'"

# Writing .env
MSG_WRITING_ENV="Writing .env file..."
MSG_ENV_CREATED="âœ“ .env file created successfully"

# Docker Images
MSG_PULLING_IMAGES="Pulling Docker Images"
MSG_PULL_WARNING="âš   Warning: Failed to pull some Docker images"
MSG_PULL_INFO="This may be normal if images need to be built locally."
MSG_PULL_CONTINUING="Continuing with deployment..."

# Starting Services
MSG_STARTING_SERVICES="Starting Services"
MSG_WAITING_SERVICES="Waiting for services to be ready..."

# Admin User Creation
MSG_CREATING_ADMIN="Creating Admin User"
MSG_RUNNING_SEEDER="Running admin user seeder..."
MSG_ADMIN_SUCCESS="âœ“ Admin user setup completed successfully"
MSG_ADMIN_SETUP_SUCCESS="âœ“ Admin user setup completed successfully"
MSG_REMOVING_CREDENTIALS="Removing admin credentials from .env file..."
MSG_CREDENTIALS_REMOVED="âœ“ Credentials removed from .env (now stored securely in database)"
MSG_SEEDER_FAILED="âœ— Admin user seeder failed (exit code:"
MSG_FIELD_REQUIRED="This field is required"

# Deployment Complete
MSG_DEPLOYMENT_COMPLETE="Deployment Complete!"
MSG_ACCESS_URLS="Access URLs:"
MSG_FLAGSHIP_DASHBOARD="Flagship Dashboard:"
MSG_METRICS_INGESTION="Metrics Ingestion:"
MSG_SSH_WEBSOCKET="SSH WebSocket:"
MSG_URL_FLAGSHIP="  Flagship Dashboard:  https://"
MSG_URL_INGEST="  Metrics Ingestion:   https://"
MSG_URL_SSHWS="  SSH WebSocket:       wss://"
MSG_DNS_NOTE="Note: Ensure DNS points to this server and Caddy has valid certificates"
MSG_ADMIN_LOGIN="Admin Login Credentials:"
MSG_ADMIN_CREDENTIALS="Admin Login Credentials:"
MSG_EMAIL="Email:"
MSG_PASSWORD="Password:"
MSG_ADMIN_LOGIN_EMAIL="  Email:"
MSG_ADMIN_LOGIN_PASSWORD="  Password:"
MSG_SAVE_CREDENTIALS="âš ï¸  Save these credentials - they won't be shown again!"
MSG_ADMIN_EXISTING="Admin User:"
MSG_ADMIN_USER="Admin User:"
MSG_EXISTING_ADMIN="Using existing admin account from database"
MSG_ADMIN_USING_EXISTING="  Using existing admin account from database"
MSG_ADMIN_UPDATE_INFO="To update admin credentials, run:"
MSG_UPDATE_ADMIN_HINT="To update admin credentials, run:"
MSG_ADMIN_UPDATE_CMD="  sudo ./update-admin.sh"

# Configuration Files
MSG_CONFIG_FILES="Configuration Files:"
MSG_ENVIRONMENT="Environment:"
MSG_CONFIG_ENV="  Environment:"
MSG_BACKUPS="Backups:"
MSG_CONFIG_BACKUPS="  Backups:"

# Security Notes
MSG_SECURITY_NOTES="Security Notes:"
MSG_KEEP_ENV_SECURE="âš ï¸  Keep your .env file secure (contains secrets)"
MSG_DB_PASSWORD="âš ï¸  Database password:"
MSG_FILE_PERMISSIONS="âš ï¸  File permissions set to 600 (owner read/write only)"
MSG_SECURITY_ENV="  âš ï¸  Keep your .env file secure (contains secrets)"
MSG_SECURITY_DB_PASSWORD="  âš ï¸  Database password:"
MSG_SECURITY_PERMISSIONS="  âš ï¸  File permissions set to 600 (owner read/write only)"
MSG_BACKUP_MASTER_KEY="ðŸ”‘ IMPORTANT: Backup Your Master Key!"
MSG_KEY_BACKUP_IMPORTANT="ðŸ”‘ IMPORTANT: Backup Your Master Key!"
MSG_MASTER_KEY_IS_AT="Your SSH encryption master key is located at:"
MSG_KEY_LOCATION_INFO="Your SSH encryption master key is located at:"
MSG_VIEW_KEY="To view and backup the key, run:"
MSG_VIEW_BACKUP_KEY="To view and backup the key, run:"
MSG_STORE_KEY="Store it securely in:"
MSG_STORE_SECURELY="Store it securely in:"
MSG_PASSWORD_MANAGER="â€¢ Password manager (recommended)"
MSG_ENCRYPTED_USB="â€¢ Encrypted USB drive"
MSG_SECURE_CLOUD="â€¢ Secure cloud storage"
MSG_WITHOUT_KEY="âš ï¸  WITHOUT THIS KEY, YOU CANNOT DECRYPT SSH PRIVATE KEYS!"
MSG_KEY_WARNING="âš ï¸  WITHOUT THIS KEY, YOU CANNOT DECRYPT SSH PRIVATE KEYS!"

# Next Steps
MSG_NEXT_STEPS="Next Steps:"
MSG_STEP_ACCESS="  1. Access the Flagship dashboard at https://"
MSG_STEP_ACCESS_DASHBOARD="Access the Flagship dashboard at"
MSG_STEP_MTLS="  2. Enable mTLS authentication in System Settings (recommended if you need monitoring)"
MSG_STEP_ENABLE_MTLS="Enable mTLS authentication in System Settings (recommended if you need monitoring)"
MSG_STEP_AGENTS="  3. Configure your agents to send metrics"
MSG_STEP_CONFIGURE_AGENTS="Configure your agents to send metrics"
MSG_STEP_DNS="  4. Update domain DNS to point to this server"
MSG_STEP_UPDATE_DNS="Update domain DNS to point to this server"
MSG_STEP_LOGS="  5. Review logs for any startup issues"
MSG_STEP_REVIEW_LOGS="Review logs for any startup issues"
MSG_OPTIONAL_SECURITY="â„¹ï¸  Optional Security:"
MSG_OPTIONAL_MTLS="  To enable mTLS authentication for agents:"
MSG_MTLS_ENABLE_INFO="To enable mTLS authentication for agents:"
MSG_OPTIONAL_MTLS_UI="  â€¢ Login to Flagship > System Settings > Enable mTLS (one-click)"
MSG_MTLS_LOGIN="â€¢ Login to Flagship > System Settings > Enable mTLS (one-click)"
MSG_OPTIONAL_MTLS_CLI="  â€¢ OR run: sudo ./scripts/setup-mtls.sh (CLI option)"
MSG_MTLS_CLI="â€¢ OR run: sudo ./scripts/setup-mtls.sh (CLI option)"

# Thank You
MSG_THANK_YOU="Thank you for choosing Node Pulse Admiral! ðŸš€"
