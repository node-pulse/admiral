FROM node:22-alpine

WORKDIR /app

# Install nodemon globally
RUN npm install -g nodemon

# Copy package files
COPY package*.json ./

# Install all dependencies (including dev)
RUN npm install

# Expose WebSocket port
EXPOSE 6001

# Run with nodemon for hot reload
CMD ["nodemon", "--watch", ".", "--ext", "js,json", "index.js"]