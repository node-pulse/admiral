[defaults]
# Inventory
inventory = ./inventory/dynamic.php
inventory_cache = True
inventory_cache_timeout = 300

# Performance
forks = 100                    # Parallel execution (max 100 servers at once)
host_key_checking = False      # Disable strict host key checking
timeout = 30                   # SSH connection timeout
gathering = smart              # Smart fact gathering
fact_caching = jsonfile        # Cache facts to JSON files
fact_caching_connection = /tmp/ansible_fact_cache
fact_caching_timeout = 86400

# SSH Configuration
remote_user = root             # Default SSH user (can be overridden per host)
transport = ssh

# Callbacks
stdout_callback = yaml         # Better output formatting
callbacks_enabled = profile_tasks, timer

# Logging
log_path = /var/log/ansible/ansible.log
bin_ansible_callbacks = True

# Retry Files
retry_files_enabled = True
retry_files_save_path = /tmp/ansible-retry

# Privilege Escalation
become = True
become_method = sudo
become_user = root
become_ask_pass = False

# Error Handling
any_errors_fatal = False       # Continue on errors
max_fail_percentage = 10       # Fail if more than 10% of hosts fail

[ssh_connection]
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no
pipelining = True              # Faster execution
control_path = /tmp/ansible-ssh-%%h-%%p-%%r
